本系统作为前后端分离的营销行业管理系统，并且采用微服务分布式架构，容易扩展，方便对服务器进行集群化部署，负载能力提高，并且由于前端使用webpack打包，webpack将自动对前端页面的静态化进行优化，方便提高页面加载的速度，前端通过zuul即网关微服务请求后端的api获得数据，而不直接请求相应的微服务，方便zuul微服务根据访问流量的实时情况通过ribbon做负载均衡，为我们的零售行业的营销系统也可以适配日益扩展的企业规模。本章节通过系统各模块的设计与实现来展现整个系统的前端和后端是如何做到分离的，前端请求后端的数据格式，以及后端如何处理相应的业务逻辑。

联系人管理模块的设计与实现

联系人管理模块根据需求，可以设计出如下的页面。
搜索框联动
如图所示，最左边的栏营销人员可以从多个搜索字段中选择一个进行相应的搜素, 其中有两个栏是联动的，即营销人员在最左边栏里选择需要搜索的联系人字段，相应的，右边一个栏里会显示请输入相应字段的提示，这个功能通过vue.js的computed属性进行实现的。左边的“点击选择要搜索的字段”中的可选项通过v-for遍历fieldOptions结构，fieldOptions结构如下图所示。fieldOptions包括姓名字段、电话字段、地址字段，来源字段、创建者字段、更新者字段以及微信号字段，这些字段几乎包括了所有联系人的可搜索字段，方便传送到后台搜索微服务中进行精细搜索。fieldOptions的结构相当于一个map结构，其中key如姓名、电话等用于标签label的显示，value如name、phone用于作为field字段添加入listQuery中的字段将在之后发送到后台进行相应的搜索。


当营销人员在选择左边的一个字段如姓名时，右边的栏会显示请输入姓名，而选择电话时，右边相应的栏会显示请输入电话，实现这一点是通过vue.js中的computed属性，在联系人列表页面中的lookUp属性是通过fieldOptions动态计算生成的，由于fieldOptions确定，所以这里的lookUp属性也是确定的，lookUp在computed属性中相当于是把fieldOptions对象的key和value进行颠倒了，即fieldOptions中的key变成了lookUp中的value,而fieldOptions中的value变成了lookUp中的key，代码部分截图如下：


这样，在第二个栏中的placeholder属性可以传入lookUp[listQuery.field]就可以提取到当前已经选择的字段的对应中文名称，并且显示在placeholder属性中。
通过这样设计，每次营销人员在最左边选择一个字段field值更新为字段英文属性名，相应的营销人员再在第二个搜索栏中输入相应的要搜索的值，最后点击搜索按钮，此按钮会触发getList方法，getList方法负责把field和text的属性值拼凑成listQuery中的一个属性，方便传送到后端的SearchRequest的相应属性中，SearchRequest继承自Contact类型，拥有Contact的所有属性字段，所以，拼凑后的listQuery的json反序列化后很容易就被Spring MVC赋值到相应的SearchRequest的属性中方便搜索。

选择展示相应的属性列表
本零售行业的营销系统中还有一个很重要的功能就是可以根据营销人员的需要选择进行展示相应的字段。因为在真实的零售行业的营销管理系统中，很有可能出现字段太多，导致营销人员眼花缭乱不知道如何下手，而我们设置了相应的功能可以对属性字段进行选择展示而不是全部展示，这样将使得营销人员进行精准营销时可以更加方便。因此，本营销系统设置了一个穿梭框transfer方便营销人员根据需要显示的属性进行过滤，本营销系统的穿梭框如图所示

本穿梭框的目标列表就是选中需要显示的属性，通过v-model与data中的selectedFields进行绑定。此element ui穿梭框组件需要传入一个对象数组来告诉组件总共需要显示的属性，在本页面中是计算属性allFields提供这个对象数组，其中姓名属性、联系人ID属性、联系人姓名属性、联系人电子邮件属性的对象的disabled都为true，作用是他们只能在穿梭框的目标列表中，即必须在联系人列表中进行显示，因为一旦一个联系人没有了id、姓名将无法区分一个联系人了。在营销人员选择了属性到右边目标列表中后，并且点击确定按钮，那么selectedFields将会和filterFields进行值的传递，而本营销系统实现根据选定属性进行显示的一个关键方法就是canIDisplay，这个方法根据filterFields里的每个属性并且比较相应联系人列表上的属性名称来确定此列表是不是在穿梭框中的右边选定列表中出现，如果是出现在右边的选定列表中则表示营销人员要求显示该字段，则该字段将会在列表中进行展示，否则，营销人员不希望这个属性在列表中进行展示，此时v-if的boolean值将为false，该字段并不会在列表中进行渲染。

批量导入联系人
本零售行业的营销管理系统的另外一个重要功能就是可以根据数据导入人员的需要进行批量导入联系人，因为一旦缺失了批量导入联系人的功能，就意味着数据导入人员需要手动一个一个的填写联系人员的信息，通常，联系人的字段数量庞大，每个字段的信息又很多，对数据导入人员的效率以及公司各部门的营销机构的运行效率将带来重大的损害，所以本零售行业的营销系统必须添加批量导入联系人功能，使得数据录入人员和各部门能更快的与营销系统做数据同步。
